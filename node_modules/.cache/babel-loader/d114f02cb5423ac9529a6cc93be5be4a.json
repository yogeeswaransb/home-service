{"ast":null,"code":"var _jsxFileName = \"/Users/yogeeb/Downloads/Home-Services/HomeServices-Frontend/src/Pages/Bookings/Bookings.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { useNavigate } from 'react-router';\nimport { toast } from 'react-toastify';\nimport logo from '../../images/asy.png';\nimport axios from \"axios\";\nimport URL from \"../URL/Url\";\nimport './booking.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Bookings() {\n  _s();\n\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    const userId = sessionStorage.getItem(\"userId\"); // Make sure this is set at login\n\n    console.log(userId);\n\n    if (!userId) {\n      toast.error(\"User ID not found. Please log in again.\");\n      return;\n    }\n\n    const url = `${URL}user/cleaning/getbyidcleaning`;\n    axios.get(url, {\n      params: {\n        userId: userId\n      }\n    }).then(response => {\n      const result = response.data;\n      setData(result);\n    }).catch(err => {\n      console.error(err);\n      toast.error(\"Failed to fetch data\");\n    });\n  }, []);\n  const navigate = useNavigate();\n\n  const logout = () => {\n    toast.error(\"Logging Off\");\n    alert(\"Logging off\");\n    navigate(\"/\");\n  };\n\n  const handleApprove = itemId => {\n    const approvedData = {\n      userId: itemId,\n      status: \"Approved\"\n    }; // Adjust \"Approved\" as needed\n\n    axios.post(`${URL}user/cleaning/approve`, approvedData).then(response => {\n      toast.success(\"Approved successfully\"); // Optionally remove the approved request from the list\n\n      setData(prevData => prevData.filter(item => item.id !== itemId));\n    }).catch(err => {\n      console.error(err);\n      toast.error(\"Approval failed\");\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table table-hover table-bordered table-striped table-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Phone Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Rooms\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: data.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.phoneno\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.rooms\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary me-2\",\n              onClick: () => handleApprove(item.id),\n              children: \"Approve\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-danger\",\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 29\n          }, this)]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Bookings, \"C4eLp+cnVQD/8a55NIDgO7YGghA=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Bookings;\n\nvar _c;\n\n$RefreshReg$(_c, \"Bookings\");","map":{"version":3,"sources":["/Users/yogeeb/Downloads/Home-Services/HomeServices-Frontend/src/Pages/Bookings/Bookings.js"],"names":["React","useState","useEffect","motion","useNavigate","toast","logo","axios","URL","Bookings","data","setData","userId","sessionStorage","getItem","console","log","error","url","get","params","then","response","result","catch","err","navigate","logout","alert","handleApprove","itemId","approvedData","status","post","success","prevData","filter","item","id","map","phoneno","address","date","rooms"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { useNavigate } from 'react-router'\r\nimport { toast } from 'react-toastify'\r\nimport logo from '../../images/asy.png'\r\nimport axios from \"axios\";\r\nimport URL from \"../URL/Url\"\r\nimport './booking.css'\r\n\r\nexport default function Bookings() {\r\n    const [data, setData] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const userId = sessionStorage.getItem(\"userId\") // Make sure this is set at login\r\n        console.log(userId)\r\n        if (!userId) {\r\n            toast.error(\"User ID not found. Please log in again.\");\r\n            return;\r\n        }\r\n        const url = `${URL}user/cleaning/getbyidcleaning`\r\n        axios.get(url, {\r\n            params: { userId: userId }\r\n        }).then((response) => {\r\n            const result = response.data;\r\n            setData(result);\r\n        }).catch(err => {\r\n            console.error(err);\r\n            toast.error(\"Failed to fetch data\");\r\n        });\r\n    }, []);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const logout = () => {\r\n        toast.error(\"Logging Off\");\r\n        alert(\"Logging off\");\r\n        navigate(\"/\");\r\n    };\r\n\r\n    const handleApprove = (itemId) => {\r\n        const approvedData = { userId: itemId, status: \"Approved\" }; // Adjust \"Approved\" as needed\r\n        axios.post(`${URL}user/cleaning/approve`, approvedData)\r\n            .then((response) => {\r\n                toast.success(\"Approved successfully\");\r\n                // Optionally remove the approved request from the list\r\n                setData(prevData => prevData.filter(item => item.id !== itemId));\r\n            })\r\n            .catch(err => {\r\n                console.error(err);\r\n                toast.error(\"Approval failed\");\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div className='container'>\r\n            <table className='table table-hover table-bordered table-striped table-sm'>\r\n                <thead>\r\n                    <tr>\r\n                        <th>ID</th>\r\n                        <th>Phone Number</th>\r\n                        <th>Address</th>\r\n                        <th>Date</th>\r\n                        <th>Rooms</th>\r\n                        <th>Actions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {data.map((item) => (\r\n                        <tr key={item.id}>\r\n                            <td>{item.id}</td>\r\n                            <td>{item.phoneno}</td>\r\n                            <td>{item.address}</td>\r\n                            <td>{item.date}</td>\r\n                            <td>{item.rooms}</td>\r\n                            <td>\r\n                                <button className='btn btn-primary me-2' onClick={() => handleApprove(item.id)}>Approve</button>\r\n                                <button className='btn btn-danger'>Delete</button>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}